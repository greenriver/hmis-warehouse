- title = 'Public Report Configuration'
- content_for :title, title

= render '/warehouse_reports/breadcrumbs', tab: 'public'
%h1.mb-5= title

= simple_form_for @config, as: :config, url: public_reports_warehouse_reports_public_configs_path, method: :post do |f|
  - content_for :filters_col_l do
    %section.mr-4
      %h3 Public S3
      %p This information will be used to determine where to send the static pages and charts for your public reports.
      = f.input :s3_region, collection: GrdaWarehouse::RecurringHmisExport.available_s3_regions, as: :select_two, label: 'Region'
      = f.input :s3_bucket, label: 'Bucket'
      = f.input :s3_prefix, label: 'Prefix', hint: 'optional'
      = f.input :s3_access_key_id, label: 'Access Key ID'
      = f.input :s3_secret, label: 'Secret Access Key', as: :password
      %h3 Map Options
      %p Client data can be placed on the map using one of the following methods:
      %ul
        - PublicReports::Setting.available_map_type_descriptions.each do |name, description|
          %li
            %strong #{name} -
            = description
      = f.input :map_type, label: 'Map breakdowns', as: :select_two, collection: PublicReports::Setting.available_map_types.invert

  - content_for :filters_col_r do
    %section
      %h3 Appearance
      %p The following are all optional and will override the appearance of any public report.
      = f.input :font_url, input_html: { value: @config.font_path }
      = f.input :font_family_0, label: 'Font family', input_html: { value: @config.font_family }
      = f.input :font_size_0, label: 'Font size', input_html: { value: @config.font_size }
      = f.input :font_weight_0, label: 'Font weight', input_html: { value: @config.font_weight }
      = f.input :summary_color, input_html: { class: 'colorpicker'}
      = f.input :homeless_primary_color, input_html: { class: 'colorpicker'}
      = f.input :youth_primary_color, input_html: { class: 'colorpicker'}
      = f.input :adults_only_primary_color, input_html: { class: 'colorpicker'}
      = f.input :adults_with_children_primary_color, input_html: { class: 'colorpicker'}
      = f.input :children_only_primary_color, input_html: { class: 'colorpicker'}
      = f.input :veterans_primary_color, input_html: { class: 'colorpicker'}
      - @config.color_categories.each do |category|
        %h4 Colors for #{category.to_s.titleize}
        - @config.num_colors_per_category.each do |i|
          = f.input "#{category}_color_#{i}", input_html: { value: @config["#{category}_color_#{i}"], class: 'colorpicker'}
      %h4 Map Colors
      - 5.times do |i|
        = f.input "color_#{i}", label: "Map Color #{i}", input_html: { value: @config.color(i), class: 'colorpicker'}

  - content_for :filter_actions do
    = f.submit 'Update Configuration', class: ['btn', 'btn-primary']

  = render 'warehouse_reports/filters', f:f
