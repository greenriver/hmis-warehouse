.client__summary
  .row
    .col-sm-4
      %h3 Service Summary
      - if @client.service_history.empty?
        = "There is no service record for #{@client.name}"
      - else
        - if @client.date_of_last_service.present?
          %ul
            %li
              = "Last seen #{time_ago_in_words(@client.date_of_last_service)} ago"
            - if ( projects = @client.last_projects_served_by(include_confidential_names: true).select(&:present?) ).any?
              %li= "Last seen at #{projects.to_sentence}"
            %li
              = "#{@client.total_homeless(@client.enrollments_for_rollup(en_scope: @client.scope_for_residential_enrollments, include_confidential_names: false, only_ongoing: false))} days homeless between #{@client.date_of_first_service} and #{@client.date_of_last_service}"
        - else
          %p None
      = render 'chronic_flags', client: @client
    .col-sm-4
      %h3 Data Sharing Agreement
      = @client.consent_form_status.presence ||'No consent forms on file'
      - if ( decisions = @client.cas_reports.where( current_step: true ).order(:updated_at) ).any?
        %h3 Housing Matches
        %ul
          - decisions.each do |decision|
            %li
              = decision.decision_status.sub('Dnd', 'DND')
              on
              = decision.updated_at.to_date
      - if can_view_vspdat? && @client.vispdats.completed.any?
        %h3 VI-SPDAT Scores
        - @client.vispdats.completed.scores.each do |vispdat|
          %span.label{ class: "label-#{vispdat.score_class}" }= vispdat.score
    .col-sm-4
      - if GrdaWarehouse::Config.get(:eto_api_available) || ! Rails.env.production?
        .client__image
          = image_tag(image_client_path)
