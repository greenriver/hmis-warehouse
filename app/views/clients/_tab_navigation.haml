- show_health = @client.patient.accessible_by_user(current_user).present?
:ruby
  tabs = {
    client_path(@client) => {
      title: 'Client Dashboard',
      permission: can_view_clients?,
    },
    edit_client_path(@client) => {
      title: 'Merge',
      permission: can_edit_clients?,
    },
    history_client_path(@client) => {
      title: 'Client History',
      permission: can_edit_clients?,
    },
    polymorphic_path(health_path_generator + [:patient, :index], client_id: @client.id) => {
      title: 'Health',
      permission: show_health,
    },
    polymorphic_path(careplan_path_generator, client_id: @client.id) => {
      title: 'Care Plan',
      permission: show_health
    }
  }
  
%ul.nav.nav-tabs.margin-bottom-01
  - tabs.each do |action, details|
    - if action == current
      - if details[:permission]
        %li.active.active-tab{role: 'presentation'}
          %a{href: '#'} 
            = details[:title]
    - else
      - if details[:permission]
        %li= link_to details[:title], action
