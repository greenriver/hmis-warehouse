- chart_height ||= 800
- chart_class = "#{key}-chart"
- title ||= ''

.d-flex.flex-wrap.justify-content-between.align-items-end.mb-2
  %header.mb-2.mr-4{style: 'flex: 1; min-width: 300px'}
    %h2= title || key.to_s.titleize
    %p.description.mb-0= desc

.well.mb-6.pt-0
  .jChart.c-chart.c-chart--horizontal-bar{ class: chart_class, data: { chart: { columns: columns, categories: categories, options: { height: chart_height, follow_link: show_client_details?, link_base: 'performance_dashboards/project_type/details', key: key, sub_keys: @report.destination_bucket_titles.invert, params: detail_params, date_ranges: { report: { start_date: @report.start_date, end_date: @report.end_date, }, comparison: { start_date: @comparison.start_date, end_date: @comparison.end_date, } } } }.to_json.html_safe } }

= content_for :page_js do
  :javascript
    var section_path = "#{request.path}/section/";
    var sections = new App.Sections.Loader($('.rollup'), section_path, #{filter_params.to_json.html_safe});
    new App.WarehouseReports.PerformanceDashboards.HorizontalBar('.jChart.#{chart_class}-chart');