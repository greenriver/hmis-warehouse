.ho-container.rrh.jProgramMakeup
  .ho-container__header
    %h3 Program Makeup
  .rrh__exiting_pre-placement.chunk.pr-4.mr-4
    - content_for :panel_collapse_content, flush: true do
      .row
        .col-sm-9.rrh__time.chunk
          .percentExitingPrePlacementChart.mb-2
          .percentExitingPrePlacementChartLegend.d-flex{style: 'max-width: 100%; overflow-x: auto; overflow-y: hidden;'}
          %p.mb-4.text-center.description
            Percentage of clients exiting #{Translation.translate('pre-placement')} to #{Translation.translate('stabilization')} out of those who exited #{Translation.translate('pre-placement')}.
        .col-sm-3.metric.text-center.rrh__time.chunk
          %h4.title Percent Exiting #{Translation.translate('Pre-Placement')} to #{Translation.translate('Stabilization')} for the Reporting Period
          .metric

            - numerator = @report.entering_stabilization.distinct.select(:client_id).count
            - denominator = @report.exiting_pre_placement.distinct.select(:client_id).count
            = percentage(numerator.to_f / denominator * 100, format: '%1.0f%%')
    = render 'common/panel_collapse', id: 'percentExitingPrePlacementChart', title: "Percentage Exiting #{Translation.translate('Pre-Placement')} to #{Translation.translate('Stabilization')}", default_open: 'yes'
    - content_for :panel_collapse_content, flush: true do
      .percentInStabilizationChart.mb-2
      .percentInStabilizationChartLegend.d-flex{style: 'max-width: 100%; overflow-x: auto; overflow-y: hidden;'}
      %p.mb-4.text-center.description
        Percentage of clients enrolled in #{Translation.translate('stabilization')} out of those enrolled in either #{Translation.translate('pre-placement')} or #{Translation.translate('stabilization')}.
    = render 'common/panel_collapse', id: 'percentInStabilizationChart', title: "Percentage of Participants Enrolled in #{Translation.translate('Stabilization')}", default_open: 'yes'
    - content_for :panel_collapse_content, flush: true do
      .percentExitingStabilizationChart.mb-2
      .percentExitingStabilizationChartLegend.d-flex{style: 'max-width: 100%; overflow-x: auto; overflow-y: hidden;'}
      %p.mb-4.text-center.description
        Percentage of clients exiting #{Translation.translate('stabilization')} to a permanent destination out of those who exited #{Translation.translate('stabilization')}.
    = render 'common/panel_collapse', id: 'percentExitingStabilizationChart', title: "Percentage Exiting #{Translation.translate('Stabilization')} to Permanent Destinations", default_open: 'yes'
